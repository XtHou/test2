<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>5 Activity: Interactive charts with R | Module 2 Making sense of tabular data</title>
  <meta name="description" content="This is the second module in the FIT5147 Data Exploration and Visualisation unit. In this module you will learn about common graphics for showing tabular data. These are the kind of graphics that are common in statistics.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="5 Activity: Interactive charts with R | Module 2 Making sense of tabular data" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the second module in the FIT5147 Data Exploration and Visualisation unit. In this module you will learn about common graphics for showing tabular data. These are the kind of graphics that are common in statistics." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Activity: Interactive charts with R | Module 2 Making sense of tabular data" />
  
  <meta name="twitter:description" content="This is the second module in the FIT5147 Data Exploration and Visualisation unit. In this module you will learn about common graphics for showing tabular data. These are the kind of graphics that are common in statistics." />
  

<meta name="author" content="Kimbal Marriott">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="activity-advanced-plots-with-r.html">
<link rel="next" href="activity-clustering-with-r.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Module 2 Making sense of tabular data</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Making sense of tabular data: Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#aims-of-this-module"><i class="fa fa-check"></i><b>1.1</b> Aims of this module</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#how-to-study-for-this-module"><i class="fa fa-check"></i><b>1.2</b> How to study for this module</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html"><i class="fa fa-check"></i><b>2</b> Visualising tabular data</a><ul>
<li class="chapter" data-level="2.1" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#basic-statistical-graphics"><i class="fa fa-check"></i><b>2.1</b> Basic statistical graphics</a></li>
<li class="chapter" data-level="2.2" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#multivariate-data"><i class="fa fa-check"></i><b>2.2</b> Multivariate data</a></li>
<li class="chapter" data-level="2.3" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#showing-3d"><i class="fa fa-check"></i><b>2.3</b> Showing 3D</a></li>
<li class="chapter" data-level="2.4" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#additional-visual-attributes"><i class="fa fa-check"></i><b>2.4</b> Additional visual attributes</a></li>
<li class="chapter" data-level="2.5" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#multiple-charts"><i class="fa fa-check"></i><b>2.5</b> Multiple charts</a></li>
<li class="chapter" data-level="2.6" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#overlay-graphic-elements"><i class="fa fa-check"></i><b>2.6</b> Overlay graphic elements</a></li>
<li class="chapter" data-level="2.7" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#parallel-coordinates"><i class="fa fa-check"></i><b>2.7</b> Parallel coordinates</a></li>
<li class="chapter" data-level="2.8" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#dimension-reduction"><i class="fa fa-check"></i><b>2.8</b> Dimension reduction</a><ul>
<li class="chapter" data-level="2.8.1" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#multidimensional-scaling-example"><i class="fa fa-check"></i><b>2.8.1</b> Multidimensional scaling example</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="visualising-tabular-data.html"><a href="visualising-tabular-data.html#summary"><i class="fa fa-check"></i><b>2.9</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html"><i class="fa fa-check"></i><b>3</b> Analysis of trends and patterns</a><ul>
<li class="chapter" data-level="3.1" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html#simple-linear-regression"><i class="fa fa-check"></i><b>3.1</b> Simple linear regression</a></li>
<li class="chapter" data-level="3.2" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html#checking-for-normality"><i class="fa fa-check"></i><b>3.2</b> Checking for normality</a></li>
<li class="chapter" data-level="3.3" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html#data-transformation"><i class="fa fa-check"></i><b>3.3</b> Data transformation</a></li>
<li class="chapter" data-level="3.4" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html#other-kinds-of-curve-fitting"><i class="fa fa-check"></i><b>3.4</b> Other kinds of curve fitting</a></li>
<li class="chapter" data-level="3.5" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html#uncertainty"><i class="fa fa-check"></i><b>3.5</b> Uncertainty</a></li>
<li class="chapter" data-level="3.6" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html#clustering"><i class="fa fa-check"></i><b>3.6</b> Clustering</a></li>
<li class="chapter" data-level="3.7" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html#hierarchical-clustering"><i class="fa fa-check"></i><b>3.7</b> Hierarchical clustering</a></li>
<li class="chapter" data-level="3.8" data-path="analysis-of-trends-and-patterns.html"><a href="analysis-of-trends-and-patterns.html#summary-1"><i class="fa fa-check"></i><b>3.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html"><i class="fa fa-check"></i><b>4</b> Activity: Advanced plots with R</a><ul>
<li class="chapter" data-level="4.1" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#introducing-ggplot2"><i class="fa fa-check"></i><b>4.1</b> Introducing ggplot2</a><ul>
<li class="chapter" data-level="4.1.1" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#the-philosophy"><i class="fa fa-check"></i><b>4.1.1</b> The philosophy</a></li>
<li class="chapter" data-level="4.1.2" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#layers"><i class="fa fa-check"></i><b>4.1.2</b> Layers</a></li>
<li class="chapter" data-level="4.1.3" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#aesthetics"><i class="fa fa-check"></i><b>4.1.3</b> Aesthetics</a></li>
<li class="chapter" data-level="4.1.4" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#geometric-objects-geoms"><i class="fa fa-check"></i><b>4.1.4</b> Geometric objects (geoms)</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#visualisation-with-ggplot2"><i class="fa fa-check"></i><b>4.2</b> visualisation with ggplot2</a><ul>
<li class="chapter" data-level="" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#step-1.-read-the-data"><i class="fa fa-check"></i>Step 1. read the data</a></li>
<li class="chapter" data-level="" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#step-2.-first-graph"><i class="fa fa-check"></i>Step 2. first graph</a></li>
<li class="chapter" data-level="" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#step-3.-change-the-shape"><i class="fa fa-check"></i>Step 3. change the shape</a></li>
<li class="chapter" data-level="" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#step-4.-change-the-color"><i class="fa fa-check"></i>Step 4. change the color</a></li>
<li class="chapter" data-level="" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#step-5.-facet"><i class="fa fa-check"></i>Step 5. Facet</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#starting-at-the-end"><i class="fa fa-check"></i><b>4.3</b> Starting At The End</a></li>
<li class="chapter" data-level="4.4" data-path="activity-advanced-plots-with-r.html"><a href="activity-advanced-plots-with-r.html#now-continue-with-the-basic-examples-in-the-ggplot2-cheat-sheet"><i class="fa fa-check"></i><b>4.4</b> Now continue with the basic examples in the ggplot2 ‘cheat sheet’</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="activity-interactive-charts-with-r.html"><a href="activity-interactive-charts-with-r.html"><i class="fa fa-check"></i><b>5</b> Activity: Interactive charts with R</a><ul>
<li class="chapter" data-level="5.1" data-path="activity-interactive-charts-with-r.html"><a href="activity-interactive-charts-with-r.html#shiny"><i class="fa fa-check"></i><b>5.1</b> Shiny</a><ul>
<li class="chapter" data-level="5.1.1" data-path="activity-interactive-charts-with-r.html"><a href="activity-interactive-charts-with-r.html#structure-of-a-shiny-app"><i class="fa fa-check"></i><b>5.1.1</b> Structure of a Shiny App</a></li>
<li class="chapter" data-level="5.1.2" data-path="activity-interactive-charts-with-r.html"><a href="activity-interactive-charts-with-r.html#shiny-with-ggplot"><i class="fa fa-check"></i><b>5.1.2</b> Shiny with ggplot</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="activity-interactive-charts-with-r.html"><a href="activity-interactive-charts-with-r.html#other-ways"><i class="fa fa-check"></i><b>5.2</b> Other Ways</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="activity-clustering-with-r.html"><a href="activity-clustering-with-r.html"><i class="fa fa-check"></i><b>6</b> Activity: Clustering with R</a><ul>
<li class="chapter" data-level="6.1" data-path="activity-clustering-with-r.html"><a href="activity-clustering-with-r.html#clustering-irises-data"><i class="fa fa-check"></i><b>6.1</b> Clustering “irises” data</a></li>
<li class="chapter" data-level="6.2" data-path="activity-clustering-with-r.html"><a href="activity-clustering-with-r.html#clustering-crickets-data"><i class="fa fa-check"></i><b>6.2</b> Clustering “crickets” data</a></li>
<li class="chapter" data-level="6.3" data-path="activity-clustering-with-r.html"><a href="activity-clustering-with-r.html#hierarchical-clustering-1"><i class="fa fa-check"></i><b>6.3</b> Hierarchical clustering</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Module 2 Making sense of tabular data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="activity-interactive-charts-with-r" class="section level1">
<h1><span class="header-section-number">5</span> Activity: Interactive charts with R</h1>
<p>In this activity we will look at some of the ways that you can create interactive data visualisations with R. Unfortunately there is no one best approach. You will need to install the relevant libraries/packages.</p>
<div id="shiny" class="section level2">
<h2><span class="header-section-number">5.1</span> Shiny</h2>
<p>Shiny is an R package that makes it easy to build interactive web applications (apps) straight from R. If you haven’t installed the Shiny package, open RStudio. And follow the <a href="">instructions</a> in the previous section to install <code>"shiny"</code> package.</p>
<p>It has some built in examples. Let’s try one of them:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(shiny)
<span class="kw">runExample</span>(<span class="st">&quot;01_hello&quot;</span>)</code></pre>
<div class="figure">
<img src="diagrams_datasets/section5/Screen-Shot-2017-02-01-at-11.04.54-am-768x236.png" alt="shiny example" />
<p class="caption">shiny example</p>
</div>
<p>You can see controls (‘Open in browser’, ‘Number of bins:’ at top), a histogram, some text and the actual code. Note that code comes in pairs, <code>ui.R</code> and <code>server.R</code>.</p>
<p>If you get an error message “R Session Aborted”, that’s saying you need to update your R packages.</p>
<p>Please run the following command in the Console of RStudio (located at left-bottom):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">update.packages</span>(<span class="dt">ask =</span> <span class="ot">FALSE</span>, <span class="dt">checkBuilt =</span> <span class="ot">TRUE</span>)</code></pre>
<p>Be patient, it may take 10-15 minutes to update the packages.</p>
<div id="structure-of-a-shiny-app" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Structure of a Shiny App</h3>
<p>Shiny apps usually have two components (two files in the same folder):</p>
<ul>
<li>[<code>ui.R</code>] a user-interface script. This creates the visual elements and controls the layout and appearance of the Shiny app</li>
<li>[<code>server.R</code>] a server script. This assembles inputs into outputs and provide instructions on how to build the visual objects to show with the page.</li>
</ul>
<p>With the above built-in example, we have the UI function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ui.R</span>
<span class="kw">library</span>(shiny)
 
<span class="co"># Define UI for application that draws a histogram</span>
<span class="kw">shinyUI</span>(<span class="kw">fluidPage</span>(
 
  <span class="co"># Application title</span>
  <span class="kw">titlePanel</span>(<span class="st">&quot;Hello Shiny!&quot;</span>),
 
  <span class="co"># Sidebar with a slider input for the number of bins</span>
  <span class="kw">sidebarLayout</span>(
    <span class="kw">sidebarPanel</span>(
      <span class="kw">sliderInput</span>(<span class="st">&quot;bins&quot;</span>,
                  <span class="st">&quot;Number of bins:&quot;</span>,
                  <span class="dt">min =</span> <span class="dv">1</span>,
                  <span class="dt">max =</span> <span class="dv">50</span>,
                  <span class="dt">value =</span> <span class="dv">30</span>)
    ),
 
    <span class="co"># Show a plot of the generated distribution</span>
    <span class="kw">mainPanel</span>(
      <span class="kw">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>)
    )
  )
))</code></pre>
<p>This adds a titlePanel (line 8) and an interactive control panel (i.e., a sliderbar for getting user input for number of bins, line 10-18) to the user interface. It also adds an output object “distPlot” to the mainPanel (line 22).</p>
<p>So <code>ui.R</code> tells Shiny what to show and where to display the output objects and now we can provide instructions on how to build those objects in <code>server.R</code>. Following is the server code in the running example:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># server.R</span>
<span class="kw">library</span>(shiny)
 
<span class="co"># Define server logic required to draw a histogram</span>
<span class="kw">shinyServer</span>(<span class="cf">function</span>(input, output) {
 
  <span class="co"># Expression that generates a histogram. The expression is</span>
  <span class="co"># wrapped in a call to renderPlot to indicate that:</span>
  <span class="co">#</span>
  <span class="co">#  1) It is &quot;reactive&quot; and therefore should be automatically</span>
  <span class="co">#     re-executed when inputs change</span>
  <span class="co">#  2) Its output type is a plot</span>
 
  output<span class="op">$</span>distPlot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
    x    &lt;-<span class="st"> </span>faithful[, <span class="dv">2</span>]  <span class="co"># Old Faithful Geyser data</span>
    bins &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="kw">min</span>(x), <span class="kw">max</span>(x), <span class="dt">length.out =</span> input<span class="op">$</span>bins <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)
 
    <span class="co"># draw the histogram with the specified number of bins</span>
    <span class="kw">hist</span>(x, <span class="dt">breaks =</span> bins, <span class="dt">col =</span> <span class="st">&#39;darkgray&#39;</span>, <span class="dt">border =</span> <span class="st">&#39;white&#39;</span>)
  })
})</code></pre>
<p>This plots a histogram of R’s faithful dataset with a configurable number of bins (i.e., specified by user).</p>
<p><mark class="big">Interaction between ui.R and server.R</mark></p>
<p><strong>Input</strong>: we can create a list of elements for gathering dynamic user input in the ui script. The value of the input can be used in the server function when constructing the output object. In the running example, the following code (line 12; <code>ui.R</code>), specifies an input variable “bins”.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sliderInput</span>(<span class="st">&quot;bins&quot;</span>,</code></pre>
<p>The value of “bins” gathered from the user is then used to specify the number of bins in the histogram in the server function (line 16; <code>server.R</code>)</p>
<pre class="sourceCode r"><code class="sourceCode r">bins &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="kw">min</span>(x), <span class="kw">max</span>(x), <span class="dt">length.out =</span> input<span class="op">$</span>bins <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</code></pre>
<p><strong>Output</strong>: We can also add output objects to the user-interface in <code>ui.R</code>.</p>
<p>For example, the code file below (line 22; <code>ui.R</code>) uses plotOutput to add a reactive plot to the main panel of the Shiny app pictured above.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Show a plot of the generated distribution</span>
<span class="kw">mainPanel</span>(
  <span class="kw">plotOutput</span>(<span class="st">&quot;distPlot&quot;</span>)
)</code></pre>
<p>Notice that the function <code>plotOutput</code> takes an argument, the character string “distPlot”, this is the name of the reactive element.</p>
<p>Then in the server function, we tell shiny how to construct this object. In the running example, the following code (line 14-20; <code>server.R</code>) specifies the value of “distPlot”, which essentially is a histogram.</p>
<pre class="sourceCode r"><code class="sourceCode r">output<span class="op">$</span>distPlot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
  x    &lt;-<span class="st"> </span>faithful[, <span class="dv">2</span>]  <span class="co"># Old Faithful Geyser data</span>
  bins &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="kw">min</span>(x), <span class="kw">max</span>(x), <span class="dt">length.out =</span> input<span class="op">$</span>bins <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)
 
  <span class="co"># draw the histogram with the specified number of bins</span>
  <span class="kw">hist</span>(x, <span class="dt">breaks =</span> bins, <span class="dt">col =</span> <span class="st">&#39;darkgray&#39;</span>, <span class="dt">border =</span> <span class="st">&#39;white&#39;</span>)
})</code></pre>
<p>It is important to note that the object name you specified in <code>server.R</code> must match the reactive element name created in <code>ui.R</code>. In the script above, <code>output$distPlot</code> matches <code>plotOutput</code>(<code>"distPlot"</code>) in your <code>ui.R</code> script.</p>
<p>The output objects shown in the HTML page are dynamically updated in response to the user input through the interactions between the ui and server. The following figure shows the basic architecture of an Shiny app:</p>
<div class="figure">
<img src="diagrams_datasets/section5/basicAR1-768x186.png" alt="shiny example" />
<p class="caption">shiny example</p>
</div>
<p>The Shiny <a href="https://shiny.rstudio.com/gallery/">gallery</a> contains some good examples of Shiny apps, you can try their demos later.</p>
<p>Now it’s DIY time, here’s the UI code:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ui.R</span>
<span class="kw">library</span>(shiny)
 
<span class="co"># Define UI for miles per gallon application</span>
<span class="kw">shinyUI</span>(<span class="kw">fluidPage</span>( 
  
 <span class="co"># Application title</span>
 <span class="kw">headerPanel</span>(<span class="st">&quot;Miles Per Gallon&quot;</span>),
  
 <span class="co"># Sidebar with controls to select the variable to plot against</span>
 <span class="co"># mpg and to specify whether outliers should be included</span>
 <span class="kw">sidebarLayout</span>(
   <span class="kw">sidebarPanel</span>(
     <span class="kw">selectInput</span>(<span class="st">&quot;variable&quot;</span>, <span class="st">&quot;Variable:&quot;</span>, 
       <span class="kw">c</span>(<span class="st">&quot;Cylinders&quot;</span> =<span class="st"> &quot;cyl&quot;</span>, 
         <span class="st">&quot;Transmission&quot;</span> =<span class="st"> &quot;am&quot;</span>,
         <span class="st">&quot;Gears&quot;</span> =<span class="st"> &quot;gear&quot;</span>)
     ),
  
     <span class="kw">checkboxInput</span>(<span class="st">&quot;outliers&quot;</span>, <span class="st">&quot;Show outliers&quot;</span>, <span class="ot">FALSE</span>)
   ),
  
   <span class="co"># Show the caption and plot of the requested variable against mpg</span>
   <span class="kw">mainPanel</span>(
     <span class="kw">h3</span>(<span class="kw">textOutput</span>(<span class="st">&quot;caption&quot;</span>)),
     <span class="kw">plotOutput</span>(<span class="st">&quot;mpgPlot&quot;</span>)
   )
   )
))</code></pre>
<p>and the <code>server.R</code></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># server.R</span>
<span class="kw">library</span>(shiny)
<span class="kw">library</span>(datasets)
  
mpgData &lt;-<span class="st"> </span>mtcars
mpgData<span class="op">$</span>am &lt;-<span class="st"> </span><span class="kw">factor</span>(mpgData<span class="op">$</span>am, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Automatic&quot;</span>, <span class="st">&quot;Manual&quot;</span>))
<span class="co"># Define server logic required to plot various variables against mpg</span>
<span class="kw">shinyServer</span>(<span class="cf">function</span>(input, output) {
 <span class="co"># Compute the forumla text in a reactive expression since it is </span>
 <span class="co"># shared by the output$caption and output$mpgPlot expressions</span>
 formulaText &lt;-<span class="st"> </span><span class="kw">reactive</span>({
 <span class="kw">paste</span>(<span class="st">&quot;mpg ~&quot;</span>, input<span class="op">$</span>variable)
 })
 <span class="co"># Return the formula text for printing as a caption</span>
 output<span class="op">$</span>caption &lt;-<span class="st"> </span><span class="kw">renderText</span>({<span class="kw">formulaText</span>()})
  
 <span class="co"># Generate a plot of the requested variable against mpg and only </span>
 <span class="co"># include outliers if requested</span>
 output<span class="op">$</span>mpgPlot &lt;-<span class="st"> </span><span class="kw">renderPlot</span>({
 <span class="kw">boxplot</span>(<span class="kw">as.formula</span>(<span class="kw">formulaText</span>()), 
 <span class="dt">data =</span> mpgData,
 <span class="dt">outline =</span> input<span class="op">$</span>outliers)
 })
})</code></pre>
<p>To run the Shiny App use the ‘&gt; Run App’ menu (above either file, as shown below):</p>
<div class="figure">
<img src="diagrams_datasets/section5/RunApp.png" alt="shiny example" />
<p class="caption">shiny example</p>
</div>
<p>Launches a separate Shiny browser, you should see a boxplot and some controls. Interact!</p>
<div class="figure">
<img src="diagrams_datasets/section5/shiny.png" alt="shiny example" />
<p class="caption">shiny example</p>
</div>
<p>If you have more than one shiny app then one way to manage them is with folders, e.g. the above is in a folder ‘Car’ in the working directory (use <code>getwd()</code> to see). So to run the current app use the Console command:</p>
<p><code>runApp()</code></p>
<p>(or use ‘&gt; Run App’ button). To run another app (in another location) use the path, e.g.:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">runApp</span>(<span class="st">&quot;Car&quot;</span>)</code></pre>
</div>
<div id="shiny-with-ggplot" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Shiny with ggplot</h3>
<p>Save your <code>ui.R</code> &amp; <code>server.R</code> in a folder (e.g. ‘Car’).</p>
<p>Copy the folder to a new one (and rename it), open it, open the <code>server.R</code> code and replace it with:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># server.R</span>
<span class="kw">library</span>(shiny)
<span class="kw">library</span>(datasets)
<span class="kw">library</span>(ggplot2) <span class="co"># load ggplot</span>
 
<span class="co"># Define server logic required to plot various variables against mpg</span>
<span class="kw">shinyServer</span>(<span class="cf">function</span>(input, output) {
  
  <span class="co"># Return the formula text for printing as a caption</span>
  output<span class="op">$</span>caption &lt;-<span class="st"> </span><span class="kw">reactiveText</span>(<span class="cf">function</span>() {
    <span class="kw">paste</span>(<span class="st">&quot;mpg ~&quot;</span>, input<span class="op">$</span>variable)
  })
   
  <span class="co"># Generate a plot of the requested variable against mpg and only </span>
  <span class="co"># include outliers if requested</span>
  <span class="co"># ggplot version</span>
   
   output<span class="op">$</span>mpgPlot &lt;-<span class="st"> </span><span class="kw">reactivePlot</span>(<span class="cf">function</span>() {
     <span class="co"># check for the input variable</span>
     <span class="cf">if</span> (input<span class="op">$</span>variable <span class="op">==</span><span class="st"> &quot;am&quot;</span>) {
       <span class="co"># am</span>
       mpgData &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">mpg =</span> mtcars<span class="op">$</span>mpg, 
                             <span class="dt">var =</span> <span class="kw">factor</span>(mtcars[[input<span class="op">$</span>variable]], 
                                          <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Automatic&quot;</span>, <span class="st">&quot;Manual&quot;</span>)))
     }
     <span class="cf">else</span> {
       <span class="co"># cyl and gear</span>
       mpgData &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">mpg =</span> mtcars<span class="op">$</span>mpg, 
                             <span class="dt">var =</span> <span class="kw">factor</span>(mtcars[[input<span class="op">$</span>variable]])
                             )
     }
 
     p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(mpgData, <span class="kw">aes</span>(var, mpg)) <span class="op">+</span><span class="st"> </span>
<span class="st">       </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.size =</span> <span class="kw">ifelse</span>(input<span class="op">$</span>outliers, <span class="dv">2</span>, <span class="ot">NA</span>)) <span class="op">+</span><span class="st"> </span>
<span class="st">       </span><span class="kw">xlab</span>(input<span class="op">$</span>variable)
     <span class="kw">print</span>(p)
   })
   
})
<span class="co"># from </span>
<span class="co"># http://web.stanford.edu/~cengel/cgi-bin/anthrospace/building-my-first-shiny-application-with-ggplot</span></code></pre>
<p>Run &amp; interact</p>
<p><strong>Optional:</strong></p>
<ul>
<li>Look for the other examples included in shiny:
<ul>
<li>system.file(“examples”, package=“shiny”)</li>
</ul></li>
<li>See also <a href="http://shiny.rstudio.com/gallery" class="uri">http://shiny.rstudio.com/gallery</a></li>
<li>“the Shiny Tutorial” <a href="http://shiny.rstudio.com/tutorial/" class="uri">http://shiny.rstudio.com/tutorial/</a></li>
<li><a href="http://toddwschneider.com/posts/traveling-salesman-with-simulated-annealing-r-and-shiny/" class="uri">http://toddwschneider.com/posts/traveling-salesman-with-simulated-annealing-r-and-shiny/</a></li>
</ul>
</div>
</div>
<div id="other-ways" class="section level2">
<h2><span class="header-section-number">5.2</span> Other Ways</h2>
<p>There are also a number of other ways to make interactive graphics in R. ggvis is from the makers of ggplot. It aims to make it easy to build interactive graphics for exploratory data analysis. Similar to Shiny, you will need to install ggvis package. Once installed, run the following (in a new file, name it as you want):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggvis)
p &lt;-<span class="st"> </span><span class="kw">ggvis</span>(mtcars, <span class="dt">x =</span> <span class="op">~</span>hp, <span class="dt">y =</span> <span class="op">~</span>mpg)
<span class="kw">layer_points</span>(p)</code></pre>
<p>All ggvis graphics are web graphics, and need to be shown in the browser. RStudio includes a built-in browser ‘Viewer’ so it can show you the plots directly (note that it’s in the ‘Viewer’ tab, not in ‘Plots’). You can combine the two steps:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">layer_points</span>(<span class="kw">ggvis</span>(mtcars, <span class="dt">x =</span> <span class="op">~</span>hp, <span class="dt">y =</span> <span class="op">~</span>mpg))</code></pre>
<p>Or you can use pipes: %&gt;%
These allow you to rewrite the previous as:</p>
<pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggvis</span>(<span class="dt">x =</span> <span class="op">~</span>hp, <span class="dt">y =</span> <span class="op">~</span>mpg) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">layer_points</span>()</code></pre>
<p>Right, but where’s the interaction? Try this:</p>
<pre class="sourceCode r"><code class="sourceCode r">mtcars <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggvis</span>(<span class="op">~</span>wt, <span class="op">~</span>mpg, 
    <span class="dt">size :=</span> <span class="kw">input_slider</span>(<span class="dv">10</span>, <span class="dv">100</span>),
    <span class="dt">opacity :=</span> <span class="kw">input_slider</span>(<span class="dv">0</span>, <span class="dv">1</span>)
  ) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">layer_points</span>()</code></pre>
<p><mark class="red">“Showing dynamic visualisation. Press Escape/Ctrl + C to stop.”</mark></p>
<p>In fact CTRL-C just makes it mad, use ESC… (AND you have to do it in the correct active window, the Console, not the Viewer). So try the controls in the Viewer then stop the process in the Console (ESC or use the STOP button).</p>
<p>Behind the scenes, interactive plots are built with <a href="https://www.rstudio.com/shiny/">shiny</a>, and you can currently only have one running at a time in a given R session. However it looks like ggvis is no longer being developed.</p>
<p>An alternative to Shiny is <a href="https://www.rstudio.com/shiny/">plotly</a>:</p>
<p>“Plotly was built using <a href="Yet%20another%20way%20to%20have%20interactive%20graphs%20in%20plots%20tab%20(not%20‘Viewer’)%20in%20R%20is%20this:">Python</a> and the <a href="https://en.wikipedia.org/wiki/Django_(web_framework)">Django</a> framework, with a front end using <a href="https://en.wikipedia.org/wiki/JavaScript">JavaScript</a> and the visualization library <a href="https://en.wikipedia.org/wiki/D3.js">D3.js</a>, <a href="https://en.wikipedia.org/wiki/HTML">HTML</a> and <a href="https://en.wikipedia.org/wiki/Cascading_Style_Sheets">CSS</a>. Files are hosted on <a href="https://en.wikipedia.org/wiki/Amazon_S3">Amazon S3</a>” – it is <strong>well worth a look</strong>, has APIs for R &amp; Python, also libraries, also tools to convert plots.</p>
<p>Yet another way to have interactive graphs in plots tab (not ‘Viewer’) in R is this:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;manipulate&quot;</span>)
<span class="kw">library</span>(manipulate)
<span class="kw">manipulate</span>(<span class="kw">plot</span>(<span class="dv">1</span><span class="op">:</span>x), <span class="dt">x =</span> <span class="kw">slider</span>(<span class="dv">1</span>, <span class="dv">100</span>))
<span class="kw">manipulate</span>(
  <span class="kw">plot</span>(
    cars, <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">0</span>, x.max), 
    <span class="dt">type =</span> type, <span class="dt">ann =</span> label, <span class="dt">col=</span>col, <span class="dt">pch=</span>pch, <span class="dt">cex=</span>cex
  ),
  <span class="dt">x.max =</span> <span class="kw">slider</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dt">step=</span><span class="dv">5</span>, <span class="dt">initial =</span> <span class="dv">25</span>), 
  <span class="dt">type =</span> <span class="kw">picker</span>(<span class="st">&quot;Points&quot;</span> =<span class="st"> &quot;p&quot;</span>, <span class="st">&quot;Line&quot;</span> =<span class="st"> &quot;l&quot;</span>, <span class="st">&quot;Step&quot;</span> =<span class="st"> &quot;s&quot;</span>), 
  <span class="dt">label =</span> <span class="kw">checkbox</span>(<span class="ot">TRUE</span>, <span class="st">&quot;Draw Labels&quot;</span>), 
  <span class="dt">col=</span><span class="kw">picker</span>(<span class="st">&quot;red&quot;</span>=<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>=<span class="st">&quot;green&quot;</span>, <span class="st">&quot;yellow&quot;</span>=<span class="st">&quot;yellow&quot;</span>), 
  <span class="dt">pch =</span> <span class="kw">picker</span>(<span class="st">&quot;1&quot;</span>=<span class="dv">1</span>,<span class="st">&quot;2&quot;</span>=<span class="dv">2</span>,<span class="st">&quot;3&quot;</span>=<span class="dv">3</span>, <span class="st">&quot;4&quot;</span>=<span class="dv">4</span>, <span class="st">&quot;5&quot;</span>=<span class="dv">5</span>, <span class="st">&quot;6&quot;</span>=<span class="dv">6</span>,<span class="st">&quot;7&quot;</span>=<span class="dv">7</span>,
    <span class="st">&quot;8&quot;</span>=<span class="dv">8</span>, <span class="st">&quot;9&quot;</span>=<span class="dv">9</span>, <span class="st">&quot;10&quot;</span>=<span class="dv">10</span>,<span class="st">&quot;11&quot;</span>=<span class="dv">11</span>, <span class="st">&quot;12&quot;</span>=<span class="dv">12</span>,<span class="st">&quot;13&quot;</span>=<span class="dv">13</span>, <span class="st">&quot;14&quot;</span>=<span class="dv">14</span>, 
    <span class="st">&quot;15&quot;</span>=<span class="dv">15</span>, <span class="st">&quot;16&quot;</span>=<span class="dv">16</span>, <span class="st">&quot;17&quot;</span>=<span class="dv">17</span>, <span class="st">&quot;18&quot;</span>=<span class="dv">18</span>,<span class="st">&quot;19&quot;</span>=<span class="dv">19</span>,<span class="st">&quot;20&quot;</span>=<span class="dv">20</span>, 
    <span class="st">&quot;21&quot;</span>=<span class="dv">21</span>,<span class="st">&quot;22&quot;</span>=<span class="dv">22</span>, <span class="st">&quot;23&quot;</span>=<span class="dv">23</span>,<span class="st">&quot;24&quot;</span>=<span class="dv">24</span>
  ), 
  <span class="dt">cex=</span><span class="kw">picker</span>(<span class="st">&quot;1&quot;</span>=<span class="dv">1</span>,<span class="st">&quot;2&quot;</span>=<span class="dv">2</span>,<span class="st">&quot;3&quot;</span>=<span class="dv">3</span>, <span class="st">&quot;4&quot;</span>=<span class="dv">4</span>, 
    <span class="st">&quot;5&quot;</span>=<span class="dv">5</span>,<span class="st">&quot;6&quot;</span>=<span class="dv">6</span>,<span class="st">&quot;7&quot;</span>=<span class="dv">7</span>,<span class="st">&quot;8&quot;</span>=<span class="dv">8</span>, <span class="st">&quot;9&quot;</span>=<span class="dv">9</span>, <span class="st">&quot;10&quot;</span>=<span class="dv">10</span>
  )
)
<span class="co"># pch is styles x 24</span>
<span class="co"># cex is size x 10</span>
<span class="co"># 3 types: point, line, bar</span>
<span class="co"># 3 colours</span></code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="activity-advanced-plots-with-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="activity-clustering-with-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "Module"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
