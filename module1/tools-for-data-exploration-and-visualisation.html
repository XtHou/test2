<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>5 Tools for Data Exploration and Visualisation | Module 1 Introduction to data exploration and visualisation</title>
  <meta name="description" content="This is the first module of six in FIT5147 Data Exploration and Visualisation. This unit introduces statistical and visualisation techniques for the exploratory analysis of data.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="5 Tools for Data Exploration and Visualisation | Module 1 Introduction to data exploration and visualisation" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is the first module of six in FIT5147 Data Exploration and Visualisation. This unit introduces statistical and visualisation techniques for the exploratory analysis of data." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Tools for Data Exploration and Visualisation | Module 1 Introduction to data exploration and visualisation" />
  
  <meta name="twitter:description" content="This is the first module of six in FIT5147 Data Exploration and Visualisation. This unit introduces statistical and visualisation techniques for the exploratory analysis of data." />
  

<meta name="author" content="Kimbal Marriott">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="brief-history-of-data-visualisation.html">
<link rel="next" href="designing-data-visualisations.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Module 1 Introduction to data exploration and visualisation</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to data exploration and visualisation: Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#aims-of-this-module"><i class="fa fa-check"></i><b>1.1</b> Aims of this module</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#how-to-study-for-this-module"><i class="fa fa-check"></i><b>1.2</b> How to study for this module</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-visualisation.html"><a href="data-visualisation.html"><i class="fa fa-check"></i><b>2</b> Data Visualisation</a></li>
<li class="chapter" data-level="3" data-path="visual-analytics-and-the-role-of-data-visualisation.html"><a href="visual-analytics-and-the-role-of-data-visualisation.html"><i class="fa fa-check"></i><b>3</b> Visual analytics and the role of data visualisation</a><ul>
<li class="chapter" data-level="3.1" data-path="visual-analytics-and-the-role-of-data-visualisation.html"><a href="visual-analytics-and-the-role-of-data-visualisation.html#role-of-data-visualisation-in-data-science"><i class="fa fa-check"></i><b>3.1</b> Role of data visualisation in data science</a></li>
<li class="chapter" data-level="3.2" data-path="visual-analytics-and-the-role-of-data-visualisation.html"><a href="visual-analytics-and-the-role-of-data-visualisation.html#data-checking-and-cleaning"><i class="fa fa-check"></i><b>3.2</b> Data checking and cleaning</a></li>
<li class="chapter" data-level="3.3" data-path="visual-analytics-and-the-role-of-data-visualisation.html"><a href="visual-analytics-and-the-role-of-data-visualisation.html#exploration-and-discovery"><i class="fa fa-check"></i><b>3.3</b> Exploration and discovery</a></li>
<li class="chapter" data-level="3.4" data-path="visual-analytics-and-the-role-of-data-visualisation.html"><a href="visual-analytics-and-the-role-of-data-visualisation.html#presentation-of-results"><i class="fa fa-check"></i><b>3.4</b> Presentation of results</a></li>
<li class="chapter" data-level="3.5" data-path="visual-analytics-and-the-role-of-data-visualisation.html"><a href="visual-analytics-and-the-role-of-data-visualisation.html#summary"><i class="fa fa-check"></i><b>3.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="brief-history-of-data-visualisation.html"><a href="brief-history-of-data-visualisation.html"><i class="fa fa-check"></i><b>4</b> Brief history of data visualisation</a><ul>
<li class="chapter" data-level="4.1" data-path="brief-history-of-data-visualisation.html"><a href="brief-history-of-data-visualisation.html#prehistory"><i class="fa fa-check"></i><b>4.1</b> Prehistory</a></li>
<li class="chapter" data-level="4.2" data-path="brief-history-of-data-visualisation.html"><a href="brief-history-of-data-visualisation.html#early-civilisations"><i class="fa fa-check"></i><b>4.2</b> Early civilisations</a></li>
<li class="chapter" data-level="4.3" data-path="brief-history-of-data-visualisation.html"><a href="brief-history-of-data-visualisation.html#printing-and-paper"><i class="fa fa-check"></i><b>4.3</b> Printing and paper</a></li>
<li class="chapter" data-level="4.4" data-path="brief-history-of-data-visualisation.html"><a href="brief-history-of-data-visualisation.html#the-rise-of-information-graphics"><i class="fa fa-check"></i><b>4.4</b> The rise of information graphics</a></li>
<li class="chapter" data-level="4.5" data-path="brief-history-of-data-visualisation.html"><a href="brief-history-of-data-visualisation.html#interactive-data-visualisation"><i class="fa fa-check"></i><b>4.5</b> Interactive data visualisation</a></li>
<li class="chapter" data-level="4.6" data-path="brief-history-of-data-visualisation.html"><a href="brief-history-of-data-visualisation.html#summary-1"><i class="fa fa-check"></i><b>4.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html"><i class="fa fa-check"></i><b>5</b> Tools for Data Exploration and Visualisation</a><ul>
<li class="chapter" data-level="5.1" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="5.1.1" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#general-programming-languages"><i class="fa fa-check"></i><b>5.1.1</b> General programming languages</a></li>
<li class="chapter" data-level="5.1.2" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#generic-visual-analytics-tools"><i class="fa fa-check"></i><b>5.1.2</b> Generic visual analytics tools</a></li>
<li class="chapter" data-level="5.1.3" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#application-specific-visual-analytics-tools"><i class="fa fa-check"></i><b>5.1.3</b> Application specific visual analytics tools</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#activity-exploring-visualising-data-with-tableau-public"><i class="fa fa-check"></i><b>5.2</b> Activity: Exploring &amp; Visualising Data with Tableau Public</a><ul>
<li class="chapter" data-level="5.2.1" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#tableau-public"><i class="fa fa-check"></i><b>5.2.1</b> Tableau Public</a></li>
<li class="chapter" data-level="5.2.2" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#a.-worksheets-and-dashboards"><i class="fa fa-check"></i><b>5.2.2</b> A. Worksheets and Dashboards</a></li>
<li class="chapter" data-level="5.2.3" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#b.-fuse-tables"><i class="fa fa-check"></i><b>5.2.3</b> B. Fuse tables</a></li>
<li class="chapter" data-level="5.2.4" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#c.-choropleth-map"><i class="fa fa-check"></i><b>5.2.4</b> C. Choropleth Map</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#activity-exploring-visualising-data-using-r"><i class="fa fa-check"></i><b>5.3</b> Activity: Exploring &amp; Visualising Data using R</a><ul>
<li class="chapter" data-level="5.3.1" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#data-on-maps-with-r"><i class="fa fa-check"></i><b>5.3.1</b> Data on Maps with R</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#activity-exploring-visualising-data-with-d3"><i class="fa fa-check"></i><b>5.4</b> Activity: Exploring &amp; Visualising Data with D3</a><ul>
<li class="chapter" data-level="5.4.1" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#introduction-1"><i class="fa fa-check"></i><b>5.4.1</b> Introduction</a></li>
<li class="chapter" data-level="5.4.2" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#preparation"><i class="fa fa-check"></i><b>5.4.2</b> Preparation</a></li>
<li class="chapter" data-level="5.4.3" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#set-up-an-html-page"><i class="fa fa-check"></i><b>5.4.3</b> Set up an HTML page</a></li>
<li class="chapter" data-level="5.4.4" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#initialise-svg-canvas"><i class="fa fa-check"></i><b>5.4.4</b> Initialise svg canvas</a></li>
<li class="chapter" data-level="5.4.5" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#reading-data"><i class="fa fa-check"></i><b>5.4.5</b> Reading data</a></li>
<li class="chapter" data-level="5.4.6" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#draw-the-map"><i class="fa fa-check"></i><b>5.4.6</b> Draw the map</a></li>
<li class="chapter" data-level="5.4.7" data-path="tools-for-data-exploration-and-visualisation.html"><a href="tools-for-data-exploration-and-visualisation.html#color-the-map"><i class="fa fa-check"></i><b>5.4.7</b> Color the map</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="designing-data-visualisations.html"><a href="designing-data-visualisations.html"><i class="fa fa-check"></i><b>6</b> Designing Data Visualisations</a><ul>
<li class="chapter" data-level="6.1" data-path="designing-data-visualisations.html"><a href="designing-data-visualisations.html#what-kinds-of-data"><i class="fa fa-check"></i><b>6.1</b> What: Kinds of data</a></li>
<li class="chapter" data-level="6.2" data-path="designing-data-visualisations.html"><a href="designing-data-visualisations.html#why-the-tasks"><i class="fa fa-check"></i><b>6.2</b> Why: The tasks</a></li>
<li class="chapter" data-level="6.3" data-path="designing-data-visualisations.html"><a href="designing-data-visualisations.html#how-the-vis-idioms"><i class="fa fa-check"></i><b>6.3</b> How: The vis idioms</a></li>
<li class="chapter" data-level="6.4" data-path="designing-data-visualisations.html"><a href="designing-data-visualisations.html#summary-2"><i class="fa fa-check"></i><b>6.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="activity-five-design-sheet-methodology.html"><a href="activity-five-design-sheet-methodology.html"><i class="fa fa-check"></i><b>7</b> Activity: Five Design-Sheet Methodology</a><ul>
<li class="chapter" data-level="" data-path="activity-five-design-sheet-methodology.html"><a href="activity-five-design-sheet-methodology.html#preparation-1"><i class="fa fa-check"></i>Preparation</a></li>
<li class="chapter" data-level="" data-path="activity-five-design-sheet-methodology.html"><a href="activity-five-design-sheet-methodology.html#sheet-1-the-ideas-sheet"><i class="fa fa-check"></i>Sheet 1: The Ideas Sheet</a></li>
<li class="chapter" data-level="" data-path="activity-five-design-sheet-methodology.html"><a href="activity-five-design-sheet-methodology.html#sheet-2-3-4-alternative-designs"><i class="fa fa-check"></i>Sheet 2, 3 &amp; 4: Alternative Designs</a></li>
<li class="chapter" data-level="" data-path="activity-five-design-sheet-methodology.html"><a href="activity-five-design-sheet-methodology.html#sheet-5-realisation"><i class="fa fa-check"></i>Sheet 5: Realisation</a></li>
<li class="chapter" data-level="" data-path="activity-five-design-sheet-methodology.html"><a href="activity-five-design-sheet-methodology.html#activity"><i class="fa fa-check"></i>Activity</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Module 1 Introduction to data exploration and visualisation</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tools-for-data-exploration-and-visualisation" class="section level1">
<h1><span class="header-section-number">5</span> Tools for Data Exploration and Visualisation</h1>
<p>Data scientists use a wide variety of different tools for data exploration and visualisation. They fall into three main categories.</p>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">5.1</span> Introduction</h2>
<div id="general-programming-languages" class="section level3">
<h3><span class="header-section-number">5.1.1</span> General programming languages</h3>
<p>There are two main programming languages used</p>
<ul>
<li><p>Probably the most widely used language for data visualisation and exploration is <strong>R</strong>. While I find R a difficult language to use, it has incredible libraries for data analysis and visualisation. One of the best of the graphics libraries is <strong>ggplot2</strong> by Hadley Wickham.</p></li>
<li><p>The next most common choice is <strong>Python</strong>. This is a nicer language but does not have quite the choice of analysis packages. It is ideal for data wrangling and Python is often used for scrapping and fusing data, then R for exploration and visualisation.</p></li>
</ul>
<p>An increasingly popular choice for creating interactive presentation graphics for the web is</p>
<ul>
<li><strong>JavaScript</strong> with the <strong>D3</strong> data visualisation library. It is not commonly used for other purposes by data scientists.</li>
</ul>
<p>The great advantage of a programming language approach is that you can, in principle, do anything.</p>
</div>
<div id="generic-visual-analytics-tools" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Generic visual analytics tools</h3>
<p>A number of easy to use tools for data analysis and visualisation are available. Examples include</p>
<ul>
<li><a href="http://www.sas.com/en_ca/software/business-intelligence/visual-analytics.html">SAS Visual Analytics</a> is a visual frontend to many of the SAS analytics tools.</li>
<li><a href="https://www.tableau.com">Tableau</a> is a neasy to use visual analytics tool that is commonly used by business intelligence for interactive exploration of tabular data. It allows interactive graphics to be published on the web. It has a commercial version and a free limited offering called Tableau Public.</li>
<li><a href="https://www.qlik.com">Qlik</a> is another visual analytics tool widely used in business intelligence.</li>
</ul>
</div>
<div id="application-specific-visual-analytics-tools" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Application specific visual analytics tools</h3>
<p>The third category of tools are systems designed for helping data analysis in a particular application area. There are many of these. As an example look at</p>
<ul>
<li><p><a href="https://nationalmap.gov.au">National Map</a> is designed to show Australian government data on top of a map of Australia</p></li>
<li><p><a href="http://scaffoldhunter.sourceforge.net">Scaffold Hunter</a> is designed to analyse data in the life sciences with a focus on drug discovery.</p></li>
</ul>
<hr />
<p>FURTHER READING</p>
<p>Take a look at <a href="https://keshif.me/demo/VisTools">385 Data Visualization Tools</a> to find out about more tools</p>
<hr />
</div>
</div>
<div id="activity-exploring-visualising-data-with-tableau-public" class="section level2">
<h2><span class="header-section-number">5.2</span> Activity: Exploring &amp; Visualising Data with Tableau Public</h2>
<div id="tableau-public" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Tableau Public</h3>
<p>One of the best Data Analysis tools according to KDnuggets is:</p>
<p>No.1 <a href="https://www.tableau.com/public">Tableau Public</a>: “Tableau democratizes visualization in an elegantly simple and intuitive tool.”
<br>
<a href="https://www.kdnuggets.com/2014/06/top-10-data-analysis-tools-business.html">Top 10 Data Analysis Tools for Business</a></p>
<p>The ‘Public’ in the name refers to the promotion of online sharing of visualisations (in fact the only way you can save them, see: <a href="https://public.tableau.com/s/gallery" class="uri">https://public.tableau.com/s/gallery</a>).</p>
<p>Which may be why there’s a free version of the software available, download and install:
<a href="https://public.tableau.com/s/download" class="uri">https://public.tableau.com/s/download</a></p>
<p>(Tableau Desktop is available for educational users if anyone is interested, and you can save your visulisations locally with it).</p>
</div>
<div id="a.-worksheets-and-dashboards" class="section level3">
<h3><span class="header-section-number">5.2.2</span> A. Worksheets and Dashboards</h3>
<div id="step-1.-get-data-ready" class="section level4 unnumbered">
<h4>Step 1. Get data ready</h4>
<p>Download and examine the data “<a href="diagrams/Cultural-Exchange-International-Program-LA-Dept-of-Cultural-Affairs1.xlsx">Cultural-Exchange-International-Program-LA-Dept-of-Cultural-Affairs.xlsx</a>” here:</p>
<p><img src="diagrams/chapter1/section5/tableau-01-768x173.png" /></p>
<p><br></p>
<p>The data is already in “<strong>row-oriented tables</strong>” format. Which means, in this data file:</p>
<ul>
<li>Each row is a entity (or an object, or a record)</li>
<li>Each column is a property of this entity (or this object, or this record)</li>
</ul>
<p>Usually, this is the preferred format for most tools and data processing languages (like R).</p>
<p>However, you cannot expect all data are in this perfect format. If it is not the case, do Data wrangling!</p>
<p>More information about file format can be found at: <a href="https://onlinehelp.tableau.com/current/pro/desktop/en-us/data_tips.htm">Tableau Help: Tips for Working with Your Data</a>.</p>
</div>
<div id="step-2.-load-data-into-tableau" class="section level4 unnumbered">
<h4>Step 2. Load data into Tableau</h4>
<p>Open Tableau Public (TP), there are two ways to load the data:</p>
<ul>
<li><p>at the left top click “<strong>Excel</strong>” and navigate to the file you just downloaded.</p></li>
<li><p>Just drag your file and drop it into Tableau Public window.</p></li>
</ul>
<p><img src="diagrams/chapter1/section5/tableau-10-open.png" /></p>
</div>
<div id="step-3.-data-source-view" class="section level4 unnumbered">
<h4>Step 3. Data Source View</h4>
<p>TP will try to determine your <strong>data types</strong> automatically, the common types are:</p>
<ul>
<li># =&gt; numbers</li>
<li>Abc =&gt; text (strings)</li>
<li>An earth symbol =&gt; geographic/locations</li>
</ul>
<p>Usually this automatic process works fine, but please remember to check that the data type inferred by TP is exactly the data type you want, sometime TP will make mistakes.</p>
<p>The most common mistake is that TP will sometimes treat longitude and latitude numbers as #, but we usually want them be treated as geographic type.</p>
<p>To change the type, just click the <strong>symbol (#, Abc, Earth symbol and etc.)</strong>.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-data-source.png" /></p>
</div>
<div id="step-4.-create-worksheet" class="section level4 unnumbered">
<h4>Step 4. Create worksheet</h4>
<p>Go to worksheet by clicking on <mark class="red">‘Sheet 1’</mark> (at bottom of display, as shown below)</p>
<p><img src="diagrams/chapter1/section5/tableau-10-sheet.png" /></p>
<p>to see the TP interface:</p>
<p><img src="diagrams/chapter1/section5/tableau-10-interface.png" /></p>
<p>Shown on the left, data has been split into</p>
<ul>
<li><strong>Dimensions</strong>; by default, Tableau treats any field containing qualitative, categorical information as a dimension;</li>
<li><strong>Measures</strong>; and any field containing numeric (quantitative) information as a measure.</li>
</ul>
<p>This modular treatment of information – that is to say, the treatment of individual data fields as independent components instead of an interdependent table – enables us to pick and choose what specific pieces of data we want to visualise against one another.</p>
<p>Shown in the middle, top down, are ‘<strong>Pages</strong>’ ‘<strong>Filters</strong>’ and ‘<strong>Marks</strong>’ and then ‘<strong>Columns</strong>’ &amp; ‘<strong>Rowsm</strong>’ then a ‘<strong>Drop field here</strong>’ table (you can drop fields on all of these middle controls):</p>
<p><img src="diagrams/chapter1/section5/TP6.png" /></p>
</div>
<div id="step-5.-create-visualisations" class="section level4 unnumbered">
<h4>Step 5. Create Visualisations</h4>
<p>For our first visualisation, we will create a simple horizontal bar graph measuring City/Country against the Total Award Amounts granted to the artists from said locations.</p>
<ul>
<li>Drag ‘City,Country’ from <strong>Dimensions</strong> and drop it to <strong>Rows</strong></li>
<li>Drag ‘Total Award Amount’ from <strong>Measures</strong> and drop it to <strong>Columns</strong></li>
<li>Maybe also try to switch Rows and Columns</li>
</ul>
<p><img src="diagrams/chapter1/section5/tableau-10-first-bar-300x298.png" /></p>
</div>
<div id="step-6" class="section level4 unnumbered">
<h4>Step 6</h4>
<p>Try sorting by using the control attached to ‘‘Total Award Amount’ on the axis.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-sort.png" /></p>
</div>
<div id="step-7" class="section level4 unnumbered">
<h4>Step 7</h4>
<p>Imagine we wanted to see what individual grant amounts compose the Total Award Amount for each Country/Region. To achieve this, we would want to differentiate between “Grantees”.</p>
<p>The “Marks” functions will allow you to insert further detail into your visualization. Click and drag your “Grantee” dimension into the “Marks” table beneath the icons (as below). Your visualization should now feature individual segments, which you can click for details about all the dimensions and measures you have worked into your visualization (you can see for example that Cuba has two segments).</p>
<p><img src="diagrams/chapter1/section5/TP8.png" /></p>
<p><strong>Who were the two recipients in Havana, Cuba and how much?</strong></p>
<p><strong>(Notice the SUM(Total Award Amount) above, how about other measures, try max, min, total, mean..?)</strong></p>
</div>
<div id="step-8.-one-more-dimension" class="section level4 unnumbered">
<h4>Step 8. One more dimension</h4>
<p>We can add another dimension, e.g. ‘Discipline’ but let’s distinguish it somehow (colour!).
Drag ‘Discipline’ onto ‘Colour’:</p>
<p><img src="diagrams/chapter1/section5/tableau-10-color-768x611.png" /></p>
<p><strong>Which Discipline was granted the most, the least?</strong>
<br>
<strong>Which countries got funding for film?</strong></p>
</div>
<div id="step-9.-change-colors" class="section level4 unnumbered">
<h4>Step 9. Change colors</h4>
<p>Don’t like those colours? By clicking the “Color” in the “Marks” window, you can customize the color palette, adjusting to the distribution of information present in your visualization.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-color-chooser-208x300.png" /></p>
<p>Then ‘Edit colors’</p>
<p><img src="diagrams/chapter1/section5/tableau-10-color-palette-300x271.png" /></p>
</div>
<div id="step-10.-filtering" class="section level4 unnumbered">
<h4>Step 10. Filtering</h4>
<p>Filter by year. Drag ‘Year’ onto ‘Filters’ to see:</p>
<p><img src="diagrams/chapter1/section5/tableau-10-year.png" /></p>
<p><br>
And ‘OK’ to select all (2009 to 2013). Now all this data is wrapped up and ready to go, let’s try a geographical view.</p>
</div>
<div id="step-11.-map" class="section level4 unnumbered">
<h4>Step 11. Map</h4>
<p>Start a new sheet, the icon to the right of ‘Sheet1’ below</p>
<p><img src="diagrams/chapter1/section5/TP13.png" /></p>
<p>Drag and drop ‘Country’ onto the table below ‘Rows’ (use the larger of the ‘Drop field here’ cells):</p>
<p><img src="diagrams/chapter1/section5/tableau-10-country-768x611.png" /></p>
<p>=&gt;</p>
<p><img src="diagrams/chapter1/section5/tableau-10-map-1-768x611.png" /></p>
<p><br>
This launches a map, change it from a symbol map to a <strong>filled map</strong> using the ‘Show me’ dialog at right, drag ‘Country’ onto ‘Label’ also:</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-14-768x496.png" /></p>
<p>Now look for the measures labeled ‘Latitude’ and ‘Longitude’
<br>
<strong>What does ‘generated’ mean?</strong></p>
</div>
<div id="step-12.-color-the-map" class="section level4 unnumbered">
<h4>Step 12. Color the map</h4>
<p>Drag ‘Total Award Amount’ onto ‘Color’ (the default colour range is gradient green, change it if you hate green!):</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-13-768x496.png" /></p>
</div>
<div id="step-13.-combine-work-sheets-into-a-dashborad" class="section level4 unnumbered">
<h4>Step 13. Combine work sheets into a dashborad</h4>
<p>Combining sheets in a ‘New Dashboard’ (icon below)</p>
<p><img src="diagrams/chapter1/section5/TP16-300x24.png" /></p>
<p>Drag from top left to ‘Drop sheets here’</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-15-768x496.png" /></p>
<p>Optional: Share (if you have a tableau account).
(based on <a href="http://dh101.humanities.ucla.edu/wp-content/uploads/2014/09/Tableau_Public_Tutorial.pdf" class="uri">http://dh101.humanities.ucla.edu/wp-content/uploads/2014/09/Tableau_Public_Tutorial.pdf</a>)</p>
</div>
</div>
<div id="b.-fuse-tables" class="section level3">
<h3><span class="header-section-number">5.2.3</span> B. Fuse tables</h3>
<p>Sometimes (actually most of the time), the data is not stored in a single file.</p>
<p>For example, one file stores the <strong><em>state name</em></strong> and <strong><em>state population</em></strong> in Australia; another file stores the <strong><em>state name</em></strong> and <strong><em>state population density</em></strong> in Australia.</p>
<p>You want to explore the relationship between <strong><em>population</em></strong> and <strong><em>population density</em></strong> across different <strong><em>states</em></strong> in Australia.</p>
<p>For this very simple example, you could simply open Excel and copy and paste.</p>
<p>However, for real, large data, it takes ages to do so, as you have to link them correctly record (row) by record (row).</p>
<p>TP provides the functionality to fuse multiple data sets by linking records (rows) through the “linking property” you specify for each data set.</p>
<p>Now we are going to introduce the procedures.</p>
<p>Download the example data sets, they are ‘<a href="diagrams/Shape-of-US-Congressional-District-Boundaries-110th-Congress.csv">Shape of US Congressional District Boundaries, 110th Congress</a>‘ and ‘<a href="diagrams/Household-heating-by-Congressional-District-2008.csv">Household heating by Congressional District – 2008</a>‘.</p>
<div id="step-1.-load-the-first-data-set" class="section level4 unnumbered">
<h4>Step 1. Load the first data set</h4>
<p>Open TP first.</p>
<p>Drag the first data set “Shape-of-US-Congressional-District-Boundaries-110th-Congress.csv” and drop it into the TP windows.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-01-768x496.png" /></p>
</div>
<div id="step-2.-load-the-second-data-set" class="section level4 unnumbered">
<h4>Step 2. Load the second data set</h4>
<p>Drag the second data set “Household-heating-by-Congressional-District-2008.csv” and drop it into the previous TP windows.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-021-768x497.png" /></p>
</div>
<div id="step-3.-configure-the-fuse" class="section level4 unnumbered">
<h4>Step 3. Configure the fuse</h4>
<p>You need to specify the way you want to fuse the data sets.</p>
<ul>
<li><p>left data: first data set, Shape-of-US-Congressional-District-Boundaries-110th-Congress.csv and</p></li>
<li><p>right data: second data set, Household-heating-by-Congressional-District-2008.csv</p></li>
</ul>
<p>The 4 different ways to fuse are (TP shows them with visulisations – Venn diagram!):</p>
<ul>
<li><p>Inner, only fuse the rows (with the specified property) where the same value exists in both the left data and right data, drop the rows where the value only exists in one side.</p></li>
<li><p>Left, fuse the rows (with the specified property) that exist in the left data, and drop the row if it is in the right data but not in the left data.</p></li>
<li><p>Right, fuse the rows (with the specified property) that exist in the right data, and drop the rows if it is in the left data but not in the right data.</p></li>
<li><p>Full order, fuse the rows (with the specified property) that exist in either side.</p></li>
</ul>
<p><br><br></p>
<p>You also need to specify the linking properties for each side. In this case, let’s choose</p>
<ul>
<li>“<strong><em>id</em></strong>” for the left</li>
<li>“<strong><em>Two-Digital District</em></strong>” for the right</li>
</ul>
<p>And “inner” model to fuse.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-03.png" /></p>
<p>The fused table is shown in the “data view”.</p>
<p>Close the above window.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-04-768x496.png" /></p>
<p>And now you can create your “sheet” and use properties from both table to implement your visulisations!</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-05-225x800.png" /></p>
<p><strong>Try different fuse models, and how many rows you can get in each way?</strong></p>
</div>
</div>
<div id="c.-choropleth-map" class="section level3">
<h3><span class="header-section-number">5.2.4</span> C. Choropleth Map</h3>
<p>Choropleth map is a map with regions filled by different colors representing different properties.</p>
<p>One use case is using different color to present different type.</p>
<p>Another is using gradient color to present quantitative data.</p>
<p>You will learn more details in <a href="https://www.alexandriarepository.org/syllabus/making-sense-of-spatial-data/">Module 3 of FIT5147</a>.</p>
<div id="step-1.-data-always-go-first" class="section level4 unnumbered">
<h4>Step 1. Data always go first</h4>
<p>Download the data from <a href="diagrams/Household-heating-by-State-2008.csv">Household-heating-by-State-2008.csv</a> and “drag &amp; drop”.</p>
<p>Make sure “State” column is marked as “geographic/locations”.</p>
</div>
<div id="step-2.-create-the-map" class="section level4 unnumbered">
<h4>Step 2. Create the map</h4>
<p>Create a new “Sheet”, and drag “States” to the center.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-07-768x496.png" /></p>
<p>If you can see your map os US, congratulations! And you might choose to go to <strong>Step 3</strong> directly.</p>
<p>If your map cannot be generated properly, or you are looking at Australia, do not panic. This is not your fault, but TP has done something wrong.</p>
<p>Let’s fix it. Click on the top toolbar: <strong>Map =&gt; Edit Locations</strong></p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-08-768x510.png" /></p>
<p>You should look at the following window:</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-09.png" /></p>
<p>TP locate all your data into Australia……Maybe it is because of the self-locate service on your machine.</p>
<p>Anyway, change it to “United States” and press “OK”.</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-10-768x496.png" /></p>
</div>
<div id="step-3.-color-the-map" class="section level4 unnumbered">
<h4>Step 3. Color the map</h4>
<p>Drag “% Housing Units That Are Mobile Homes” to “Color” in “Marks” section.</p>
<p>Rename it if you think this name is so long…</p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-11-768x496.png" /></p>
</div>
<div id="step-4.-more-map-options" class="section level4 unnumbered">
<h4>Step 4. More map options</h4>
<p>Click the top toolbar: <strong>Map =&gt; Map Layers</strong></p>
<p><img src="diagrams/chapter1/section5/tableau-10-fuse-12-215x800.png" /></p>
<p>Try different options, what do they mean?</p>
<p>You can even add a colored data layer! You may want to remove your previous color first.</p>
<p>Where does the data come from?</p>
<p><br><br></p>
<p>Remember the “generated”? Investigate what can/cannot be generated?</p>
<p><br><br></p>
<p>Now its time to move on and see how to do this in R.</p>
<p><br><br></p>
<hr />
</div>
</div>
</div>
<div id="activity-exploring-visualising-data-using-r" class="section level2">
<h2><span class="header-section-number">5.3</span> Activity: Exploring &amp; Visualising Data using R</h2>
<div id="data-on-maps-with-r" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Data on Maps with R</h3>
<p>You will need R and RStudio, you will also need to install the following libraries (and dependencies):</p>
<ul>
<li><p>ggmap</p></li>
<li><p>ggplot2</p></li>
<li><p>maps</p></li>
</ul>
<p>If you are not sure how to do this and want to explore some basic knowledge about R.</p>
<p><strong>DO TAKE A LOOK AT:</strong></p>
<ul>
<li><p><a href="https://www.alexandriarepository.org/module/activity-introduction-to-rstudio-yalong/">Introduction to RStudio</a></p></li>
<li><p>Introduction to R programming</p></li>
<li><p><a href="https://cran.r-project.org/doc/contrib/Torfs+Brauer-Short-R-Intro.pdf">Torfs &amp; Brauer’s “A (Very) Short Introduction to R” [pdf]</a></p></li>
</ul>
<div id="step-1" class="section level4 unnumbered">
<h4>Step 1</h4>
<p>Run RStudio, install libraries, try the following code (copy, paste, run):</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggmap) 
<span class="kw">library</span>(ggplot2) 
<span class="kw">library</span>(maps) 
<span class="co"># or you can try e.g. require(maps) </span>
<span class="co"># map(&quot;usa&quot;) </span>
<span class="kw">map</span>(<span class="st">&#39;state&#39;</span>) <span class="co"># not necessary, just checking we can draw a map</span></code></pre>
<p>You should see a basic map of the US states:</p>
<p><img src="diagrams/chapter1/section5/RMaps1-960x461.jpg" />
<br></p>
<p>If an error appear as “Plot region too large”.</p>
<p>You just need to adjust the <strong>right bottom</strong> section of RStudio larger.</p>
</div>
<div id="step-2-read-the-modified-data-file-state-names-codes-have-been-added." class="section level4 unnumbered">
<h4>Step 2 Read the modified data file (state names &amp; codes have been added).</h4>
<p>Download the file at <a href="diagrams/Household-heating-by-State-2008.csv">Household-heating-by-State-2008.csv</a>, and put it in your working directory.</p>
<pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Household-heating-by-State-2008.csv&quot;</span>, <span class="dt">header=</span>T) 
<span class="kw">head</span>(data) 
<span class="kw">names</span>(data) </code></pre>
</div>
<div id="step-3-names-are-a-bit-much-simplify-the-one-were-interested-in" class="section level4 unnumbered">
<h4>Step 3 Names are a bit much, simplify the one we’re interested in:</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(data)[<span class="dv">4</span>] &lt;-<span class="st"> &quot;MobileHomes&quot;</span>
<span class="kw">names</span>(data)</code></pre>
</div>
<div id="step-4-now-group-the-mobile-home-data-by-state-calculating-the-average" class="section level4 unnumbered">
<h4>Step 4 Now group the Mobile Home data by State, calculating the average:</h4>
<pre class="sourceCode r"><code class="sourceCode r">ag &lt;-<span class="st"> </span><span class="kw">aggregate</span>(MobileHomes <span class="op">~</span><span class="st"> </span>States, <span class="dt">FUN =</span> mean, <span class="dt">data =</span> data)</code></pre>
<p>Look at the paprameters of aggregate.</p>
<ul>
<li><p><code>MobileHomes ~ States</code> means group the Mobile Home data by State</p></li>
<li><p><code>FUN = mean</code> means calculate their averages,</p></li>
</ul>
<p><strong>How many states should there be?</strong></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(ag) 
<span class="kw">dim</span>(ag)</code></pre>
<p>Not going to worry about the first ‘#N/A’ state for now, delete it if you like</p>
</div>
<div id="step-5-get-map-data-built-in-map-data-in-ggplot2-package" class="section level4 unnumbered">
<h4>Step 5 Get map data (built-in map data in ggplot2 package)</h4>
<pre class="sourceCode r"><code class="sourceCode r">m.usa &lt;-<span class="st"> </span><span class="kw">map_data</span>(<span class="st">&quot;state&quot;</span>) <span class="co"># we want the states </span>
<span class="kw">head</span>(m.usa) 
<span class="kw">dim</span>(m.usa) <span class="co"># more info than we need</span></code></pre>
</div>
<div id="step-6-force-our-states-to-lowercase-to-match-the-map-keep-also-one-column-of-data" class="section level4 unnumbered">
<h4>Step 6 Force our states to lowercase to match the map, keep also one column of data</h4>
<pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">region =</span> <span class="kw">tolower</span>(ag<span class="op">$</span>States), 
  <span class="dt">MobileHomes =</span> ag<span class="op">$</span>MobileHomes,
  <span class="dt">stringsAsFactors =</span> F
) 
<span class="kw">dim</span>(df)
opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">tidy.opts=</span><span class="kw">list</span>(<span class="dt">width.cutoff=</span><span class="dv">60</span>),<span class="dt">tidy=</span><span class="ot">TRUE</span>)</code></pre>
<p><strong>50 states?</strong></p>
</div>
<div id="step-7-now-plot-it-on-the-map-look-at-all-those-layers" class="section level4 unnumbered">
<h4>Step 7 Now plot it on the map (look at all those layers…)</h4>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Create a empty canvas</span>
<span class="kw">ggplot</span>(df, <span class="kw">aes</span>(<span class="dt">map_id =</span> region)) <span class="op">+</span><span class="st">   </span>
<span class="st">  </span><span class="co"># draw the grid</span>
<span class="st">  </span><span class="kw">expand_limits</span>(<span class="dt">x =</span> m.usa<span class="op">$</span>long, <span class="dt">y =</span> m.usa<span class="op">$</span>lat) <span class="op">+</span><span class="st">    </span>
<span class="st">  </span><span class="co"># draw a us map, fill = MobileHomes means color the map according to MobileHomes property</span>
<span class="st">  </span><span class="kw">geom_map</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> MobileHomes), <span class="dt">map =</span> m.usa) <span class="op">+</span><span class="st">  </span>
<span class="st">  </span><span class="co"># fix the ratio of the x and y axises, to match a map</span>
<span class="st">  </span><span class="kw">coord_map</span>()                                       </code></pre>
<p><img src="diagrams/chapter1/section5/RMaps2-960x533.jpg" />
<br><br></p>
<p><strong>QUESTION</strong>: Compare R with Tableau Public for data visualisation – <strong>which do you prefer and why?</strong> Consider also the data wrangling to prepare and process the data.</p>
<hr />
</div>
</div>
</div>
<div id="activity-exploring-visualising-data-with-d3" class="section level2">
<h2><span class="header-section-number">5.4</span> Activity: Exploring &amp; Visualising Data with D3</h2>
<p>In this activity, you are going to use D3 to build a choropleth map.</p>
<p>Do not worry, it will be easier than you expect…</p>
<div id="introduction-1" class="section level3">
<h3><span class="header-section-number">5.4.1</span> Introduction</h3>
<p><a href="">D3</a>. (<strong>Data-Driven Documents</strong>) is a HTML5/SVG + JavaScript based data visualisation toolkit. It allows you to create dynamic and interactive data visualisation that can be viewed in a web browser. D3 is a JavaScript library. JavaScript is a programming language for web pages. It is used to create web pages from dynamic content and change them in response to user interaction. Along with HTML and CSS it is one of the pillars of modern web page design.</p>
<p>D3 has its origins in <a href="https://ieeexplore.ieee.org/document/5290720/">Protovis</a>. D3 is extremely powerful and allows you to create almost any kind of visualisation you can imagine. You can have a look at some of the examples:
<a href="https://github.com/mbostock/d3/wiki/Gallery" class="uri">https://github.com/mbostock/d3/wiki/Gallery</a></p>
<p>If you look at the code you can see that this power comes at a price: D3 is quite complicated and relies on several different concepts. However, in this activity, we are not going to dive into all the details. Instead, you can have some hands-on experience of using D3. Later in the unit you will learn more about D3. Or if you cant wait there is a free comprehensive online tutorials of D3:</p>
<p><a href="http://alignedleft.com/tutorials/d3">D3 Tutorials by Scott Murray</a></p>
<p>If you are unfamiliar with JavaScript you might like to look at the W3C tutorial on JavaScript <a href="https://www.w3schools.com/js/" class="uri">https://www.w3schools.com/js/</a></p>
</div>
<div id="preparation" class="section level3">
<h3><span class="header-section-number">5.4.2</span> Preparation</h3>
<ul>
<li><p>Download the <a href="diagrams/us-states.txt">map file</a>.
<br>
This file contains the details of maps of different states in USA. Basically, it keeps the records of geographic shapes, like lines, points and etc.
<br>
(optional) Check out <a href="http://geojson.org/" class="uri">http://geojson.org/</a> for more details.</p></li>
<li><p>Download the <a href="diagrams/MobileHomes.csv">data</a>
<br>
License: CC Attribution 4.0 International (CC BY 4.0)
<br><br>
To be consistent, we are going to use the same data we used in our R activity.
D3 (or even JavaScript) is not the ideal tool for data processing, so here we use the aggregated data which was calculated by the <mark class="green">aggregate</mark> function in R.</p></li>
<li><p>Set up a static web server
<br>
For security reason, browsers cannot access local files directly, so a static web server needs to be set up to allow our D3 script to load data. The <strong>easiest way</strong> to do this is to download
<br>
<a href="http://brackets.io/" class="uri">http://brackets.io/</a>. This is a free text editor with live preview feature which runs a static web server at the back end. However you can use your favourite text editor and skip this step if you already know how to set up a static web server.
<br>
(Optional)If you prefer to launch a static server, you can do this with:</p>
<ul>
<li>Install Python (on Windows, Python should be installed by default for most Linux and Mac OS)</li>
<li>Adding Python to your system path (on Windows)</li>
<li>Use a terminal (command line) to enter your project directory/folder (with cd command)</li>
<li>Running the command:
<br>
(for python 2) python -m SimpleHTTPServer 8000
<br>
(for python 3) python -m http.server 8000</li>
<li>Then you can open <a href="http://localhost:8000/" class="uri">http://localhost:8000/</a> in your browser to access your D3 visualisations.</li>
</ul></li>
</ul>
</div>
<div id="set-up-an-html-page" class="section level3">
<h3><span class="header-section-number">5.4.3</span> Set up an HTML page</h3>
<p>Using the menu <mark class="green">File -&gt; New</mark> to create an empty file, save it to the folder you keep all the data you downloaded, with the name us-map.html (of course change the name if you do not like it).</p>
<p>Let’s create a basic HTML page with:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
    <span class="kw">&lt;head&gt;</span>
        <span class="kw">&lt;title&gt;</span>US Mobile Homes choropleth map<span class="kw">&lt;/title&gt;</span>
    <span class="kw">&lt;/head&gt;</span>
    <span class="kw">&lt;body&gt;</span>
        <span class="kw">&lt;svg&gt;&lt;/svg&gt;</span>
    <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<p>If you are using Brackets, click the “lightning” icon on the right to view this very new webpage.</p>
<p>As expected, you will see a blank page, however, if you are careful enough you can find the text on the tab of the browser is “US Mobile Homes choropleth map”.</p>
</div>
<div id="initialise-svg-canvas" class="section level3">
<h3><span class="header-section-number">5.4.4</span> Initialise svg canvas</h3>
<p>We need a canvas to draw our visualisation.</p>
<p>Luckily, we already defined our <mark class="green">svg</mark> element in the HTML. (SVG is the HTML5 standard for vector graphics)</p>
<p>We will take advantage of D3’s</p>
<ul>
<li><mark class="green">selection</mark> function to access the svg element</li>
<li><mark class="green">attr</mark> function to modify the attributes of the svg element, and</li>
<li><mark class="green">style</mark> function to modify the style of the svg element</li>
</ul>
<p>First, we need to reference D3 library in our webpage, add</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">&lt;</span>script src<span class="op">=</span><span class="st">&quot;https://d3js.org/d3.v4.min.js&quot;</span><span class="op">&gt;</span>&lt;/script<span class="op">&gt;</span></code></pre>
<p>to the body section of our HTML.</p>
<p>Create another script section for our own JavaScript code, and initialise the svg element. The whole HTML should look like:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
    <span class="kw">&lt;head&gt;</span>
        <span class="kw">&lt;title&gt;</span>US Mobile Homes choropleth map<span class="kw">&lt;/title&gt;</span>
    <span class="kw">&lt;/head&gt;</span>
    <span class="kw">&lt;body&gt;</span>
        <span class="kw">&lt;svg&gt;&lt;/svg&gt;</span>
        
        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;https://d3js.org/d3.v4.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
        
        <span class="kw">&lt;script&gt;</span>
            <span class="kw">var</span> width <span class="op">=</span> <span class="dv">960</span><span class="op">;</span>
            <span class="kw">var</span> height <span class="op">=</span> <span class="dv">500</span><span class="op">;</span>
            
            <span class="kw">var</span> svg <span class="op">=</span> <span class="va">d3</span>.<span class="at">select</span>(<span class="st">&quot;svg&quot;</span>)
                .<span class="at">attr</span>(<span class="st">&quot;width&quot;</span><span class="op">,</span> width)
                .<span class="at">attr</span>(<span class="st">&quot;height&quot;</span><span class="op">,</span> height)
                .<span class="at">style</span>(<span class="st">&quot;border&quot;</span><span class="op">,</span> <span class="st">&quot;1px solid&quot;</span>)<span class="op">;</span>
        <span class="kw">&lt;/script&gt;</span>
    <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
<p>Refresh the webpage in your browser: you should now see our canvas.</p>
<p>Of course, if you are experienced with web development, you know this process could be done without javascript and you could simply write the SVG code</p>
<p>Here we want to demonstrate some basic functions of D3.</p>
</div>
<div id="reading-data" class="section level3">
<h3><span class="header-section-number">5.4.5</span> Reading data</h3>
<p>We will take advantage of D3’s request functions to load data. (Optional) More details at: <a href="https://github.com/d3/d3/blob/master/API.md#requests-d3-request" class="uri">https://github.com/d3/d3/blob/master/API.md#requests-d3-request</a></p>
<p>We can use <mark class="green">d3.json</mark> and <mark class="green">d3.csv</mark> function to load our map and data respectively.</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
    <span class="kw">&lt;head&gt;</span>
        <span class="kw">&lt;title&gt;</span>US Mobile Homes choropleth map<span class="kw">&lt;/title&gt;</span>
    <span class="kw">&lt;/head&gt;</span>
    <span class="kw">&lt;body&gt;</span>
        <span class="kw">&lt;svg&gt;&lt;/svg&gt;</span>
        
        <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;https://d3js.org/d3.v4.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
        
        <span class="kw">&lt;script&gt;</span>
            <span class="kw">var</span> width <span class="op">=</span> <span class="dv">960</span><span class="op">;</span>
            <span class="kw">var</span> height <span class="op">=</span> <span class="dv">500</span><span class="op">;</span>
            
            <span class="kw">var</span> svg <span class="op">=</span> <span class="va">d3</span>.<span class="at">select</span>(<span class="st">&quot;svg&quot;</span>)
                .<span class="at">attr</span>(<span class="st">&quot;width&quot;</span><span class="op">,</span> width)
                .<span class="at">attr</span>(<span class="st">&quot;height&quot;</span><span class="op">,</span> height)
                .<span class="at">style</span>(<span class="st">&quot;border&quot;</span><span class="op">,</span> <span class="st">&quot;1px solid&quot;</span>)<span class="op">;</span>
            
            <span class="va">d3</span>.<span class="at">json</span>(<span class="st">&quot;us-states.txt&quot;</span><span class="op">,</span> <span class="kw">function</span>(mapData)<span class="op">{</span>
                <span class="va">d3</span>.<span class="at">csv</span>(<span class="st">&quot;MobileHomes.csv&quot;</span><span class="op">,</span> <span class="kw">function</span>(data) <span class="op">{</span>
                    
                <span class="op">}</span>)<span class="op">;</span>
            <span class="op">}</span>)<span class="op">;</span>
        <span class="kw">&lt;/script&gt;</span>
    <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre>
</div>
<div id="draw-the-map" class="section level3">
<h3><span class="header-section-number">5.4.6</span> Draw the map</h3>
<p>Let’s focus on the map first.</p>
<p>The map file is in GeoJson format and contains pure geographic information.</p>
<p>To draw a map, we need to convert the geographic information (latitude, longitude) to 2D coordinates for the screen <span class="math inline">\((x, y)\)</span>.</p>
<p>This process is called <em>map projection</em>, you will learn (a lot) more details in the future in this unit.</p>
<p>D3 provides lots of different map projections! Probably the most comprehensive collection available in Javascript. (Optional) <a href="https://github.com/d3/d3-geo-projection" class="uri">https://github.com/d3/d3-geo-projection</a></p>
<p>We use the following code to define the map projection we are going to use later.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="co">// Map projection</span>
<span class="kw">var</span> projection <span class="op">=</span> <span class="va">d3</span>.<span class="at">geoAlbersUsa</span>()
  <span class="co">// move the center of the map to the center of our canvas</span>
  .<span class="at">translate</span>([width / <span class="dv">2</span><span class="op">,</span> height / <span class="dv">2</span>]) 
  <span class="co">// scale things down so see entire US</span>
  .<span class="at">scale</span>([<span class="dv">1000</span>])<span class="op">;</span> 
  
<span class="co">// Define path generator</span>
<span class="co">// path generator that will convert GeoJSON to SVG paths</span>
<span class="kw">var</span> path <span class="op">=</span> <span class="va">d3</span>.<span class="at">geoPath</span>() 
  <span class="co">// tell path generator to use the previous map projection</span>
  .<span class="at">projection</span>(projection)<span class="op">;</span> </code></pre>
<p>After this, drawing the map is extremely easy:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> states <span class="op">=</span> <span class="va">svg</span>.<span class="at">selectAll</span>(<span class="st">&quot;path&quot;</span>)
  <span class="co">// bind the geographic data to svg elements</span>
  .<span class="at">data</span>(<span class="va">mapData</span>.<span class="at">features</span>) 
  <span class="co">// create one &quot;path&quot; svg element for each datum</span>
  .<span class="at">enter</span>().<span class="at">append</span>(<span class="st">&quot;path&quot;</span>) 
  <span class="co">// using the map projection to convert geographic information to screen coordinates</span>
  .<span class="at">attr</span>(<span class="st">&quot;d&quot;</span><span class="op">,</span> path) 
  <span class="co">// change the style properties for the svg </span>
  .<span class="at">style</span>(<span class="st">&quot;stroke&quot;</span><span class="op">,</span> <span class="st">&quot;black&quot;</span>) 
  .<span class="at">style</span>(<span class="st">&quot;stroke-width&quot;</span><span class="op">,</span> <span class="st">&quot;1&quot;</span>)
  .<span class="at">style</span>(<span class="st">&quot;fill&quot;</span><span class="op">,</span> <span class="st">&quot;white&quot;</span>)<span class="op">;</span></code></pre>
<p>Now, refresh your webpage, say hello to the US Map.</p>
<p><br><br></p>
<p>If you cannot see anything, probably it is again a trick about working directory.</p>
<p>Please use the menu on the top with “<strong>File =&gt; Open Folder</strong>” and choose the directory you kept all your files.</p>
<p>Then try the “lightning” button again.</p>
</div>
<div id="color-the-map" class="section level3">
<h3><span class="header-section-number">5.4.7</span> Color the map</h3>
<p>We need a bit data processing first.</p>
<p>To make the color of different states proportional to its value, we need to know:</p>
<ul>
<li>the value for each state</li>
<li>the min and max value among all states</li>
</ul>
<p>This can be achieved by:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> country2value <span class="op">=</span> <span class="op">{};</span>
<span class="kw">var</span> minValue <span class="op">=</span> <span class="kw">Infinity</span><span class="op">;</span>
<span class="kw">var</span> maxValue <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span>
<span class="va">data</span>.<span class="at">forEach</span>(<span class="kw">function</span>(d)<span class="op">{</span>
    <span class="kw">var</span> thisValue <span class="op">=</span> d[<span class="st">&quot;MobileHomes&quot;</span>]<span class="op">;</span>
    country2value[d[<span class="st">&quot;States&quot;</span>]] <span class="op">=</span> thisValue<span class="op">;</span>
    
    minValue <span class="op">=</span> <span class="va">Math</span>.<span class="at">min</span>(minValue<span class="op">,</span> thisValue)<span class="op">;</span>
    maxValue <span class="op">=</span> <span class="va">Math</span>.<span class="at">max</span>(maxValue<span class="op">,</span> thisValue)<span class="op">;</span>
<span class="op">}</span>)<span class="op">;</span></code></pre>
<p>We also need a color mapping to map the values to colors.</p>
<p>One good possible option is to use the <mark class="green">d3-scale-chromatic</mark> library.
<br>
(Optional) <a href="https://github.com/d3/d3-scale-chromatic" class="uri">https://github.com/d3/d3-scale-chromatic</a></p>
<p>Let’s reference this library first:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;https://d3js.org/d3-scale-chromatic.v1.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></code></pre>
<p>Here, to make choropleth map for comparing values, we want to map the continuous values to <mark class="green">Sequential</mark> colors.</p>
<p>This kind of color mapping accepts parameters of numbers from 0 to 1 and mapping them to related colors.</p>
<p>Usually light colors stand for small values, and dark ones for large values.</p>
<p>Two mappings need to be created:</p>
<ul>
<li>map values to the range of 0-1</li>
<li>map the above outputs to colors</li>
</ul>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">var</span> value2range <span class="op">=</span> <span class="va">d3</span>.<span class="at">scaleLinear</span>()
    .<span class="at">domain</span>([minValue<span class="op">,</span> maxValue])
    .<span class="at">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>])
<span class="kw">var</span> range2color <span class="op">=</span> <span class="va">d3</span>.<span class="at">interpolateBlues</span><span class="op">;</span></code></pre>
<p>Thanks for your patience, now it is the time to finish with just a few more line of code.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="va">states</span>.<span class="at">style</span>(<span class="st">&quot;fill&quot;</span><span class="op">,</span> <span class="kw">function</span>(d)<span class="op">{</span>
    <span class="cf">return</span> <span class="at">range2color</span>(<span class="at">value2range</span>(country2value[<span class="va">d</span>.<span class="va">properties</span>.<span class="at">name</span>]))<span class="op">;</span>
<span class="op">}</span>)<span class="op">;</span></code></pre>
<p><br><br></p>
<p>The whole web page should look like:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">&lt;!</span>DOCTYPE html<span class="op">&gt;</span>
<span class="op">&lt;</span>html<span class="op">&gt;</span>
    <span class="op">&lt;</span>head<span class="op">&gt;</span>
        <span class="op">&lt;</span>title<span class="op">&gt;</span>US Mobile Homes choropleth map&lt;/title<span class="op">&gt;</span>
    &lt;/head<span class="op">&gt;</span>
    <span class="op">&lt;</span>body<span class="op">&gt;</span>
        <span class="op">&lt;</span>svg<span class="op">&gt;</span>&lt;/svg<span class="op">&gt;</span>
        
        <span class="op">&lt;</span>script src<span class="op">=</span><span class="st">&quot;https://d3js.org/d3.v4.min.js&quot;</span><span class="op">&gt;</span>&lt;/script<span class="op">&gt;</span>
        <span class="op">&lt;</span>script src<span class="op">=</span><span class="st">&quot;https://d3js.org/d3-scale-chromatic.v1.min.js&quot;</span><span class="op">&gt;</span>&lt;/script<span class="op">&gt;</span>
        
        <span class="op">&lt;</span>script<span class="op">&gt;</span>
            <span class="kw">var</span> width <span class="op">=</span> <span class="dv">960</span><span class="op">;</span>
            <span class="kw">var</span> height <span class="op">=</span> <span class="dv">500</span><span class="op">;</span>
            
            <span class="kw">var</span> svg <span class="op">=</span> <span class="va">d3</span>.<span class="at">select</span>(<span class="st">&quot;svg&quot;</span>)
                .<span class="at">attr</span>(<span class="st">&quot;width&quot;</span><span class="op">,</span> width)
                .<span class="at">attr</span>(<span class="st">&quot;height&quot;</span><span class="op">,</span> height)
                .<span class="at">style</span>(<span class="st">&quot;border&quot;</span><span class="op">,</span> <span class="st">&quot;1px solid&quot;</span>)<span class="op">;</span>
            
             <span class="co">// Map projection</span>
            <span class="kw">var</span> projection <span class="op">=</span> <span class="va">d3</span>.<span class="at">geoAlbersUsa</span>()
              <span class="co">// move the center of the map to the center of our canvas</span>
              .<span class="at">translate</span>([width / <span class="dv">2</span><span class="op">,</span> height / <span class="dv">2</span>]) 
              <span class="co">// scale things down so see entire US</span>
              .<span class="at">scale</span>([<span class="dv">1000</span>])<span class="op">;</span> 
            
            <span class="co">// Define path generator</span>
            <span class="co">// path generator that will convert GeoJSON to SVG paths</span>
            <span class="kw">var</span> path <span class="op">=</span> <span class="va">d3</span>.<span class="at">geoPath</span>() 
              <span class="co">// tell path generator to use the previous map projection</span>
              .<span class="at">projection</span>(projection)<span class="op">;</span> 
                
            
            <span class="va">d3</span>.<span class="at">json</span>(<span class="st">&quot;us-states.txt&quot;</span><span class="op">,</span> <span class="kw">function</span>(mapData)<span class="op">{</span>
               
                <span class="kw">var</span> states <span class="op">=</span> <span class="va">svg</span>.<span class="at">selectAll</span>(<span class="st">&quot;path&quot;</span>)
                  <span class="co">// bind the geographic data to svg elements</span>
                  .<span class="at">data</span>(<span class="va">mapData</span>.<span class="at">features</span>) 
                  <span class="co">// create one &quot;path&quot; svg element for each datum</span>
                  .<span class="at">enter</span>().<span class="at">append</span>(<span class="st">&quot;path&quot;</span>) 
                  <span class="co">// using the map projection to convert geographic </span>
                  <span class="co">// information to screen coordinates</span>
                  .<span class="at">attr</span>(<span class="st">&quot;d&quot;</span><span class="op">,</span> path) 
                  <span class="co">// change the style properties for the svg </span>
                  .<span class="at">style</span>(<span class="st">&quot;stroke&quot;</span><span class="op">,</span> <span class="st">&quot;black&quot;</span>) 
                  .<span class="at">style</span>(<span class="st">&quot;stroke-width&quot;</span><span class="op">,</span> <span class="st">&quot;1&quot;</span>)
                  .<span class="at">style</span>(<span class="st">&quot;fill&quot;</span><span class="op">,</span> <span class="st">&quot;white&quot;</span>)<span class="op">;</span>
                
                <span class="va">d3</span>.<span class="at">csv</span>(<span class="st">&quot;MobileHomes.csv&quot;</span><span class="op">,</span> <span class="kw">function</span>(data) <span class="op">{</span>
                    
                    <span class="kw">var</span> country2value <span class="op">=</span> <span class="op">{};</span>
                    <span class="kw">var</span> minValue <span class="op">=</span> <span class="kw">Infinity</span><span class="op">;</span>
                    <span class="kw">var</span> maxValue <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span>
                    <span class="va">data</span>.<span class="at">forEach</span>(<span class="kw">function</span>(d)<span class="op">{</span>
                        <span class="kw">var</span> thisValue <span class="op">=</span> d[<span class="st">&quot;MobileHomes&quot;</span>]<span class="op">;</span>
                        country2value[d[<span class="st">&quot;States&quot;</span>]] <span class="op">=</span> thisValue<span class="op">;</span>
                        
                        minValue <span class="op">=</span> <span class="va">Math</span>.<span class="at">min</span>(minValue<span class="op">,</span> thisValue)<span class="op">;</span>
                        maxValue <span class="op">=</span> <span class="va">Math</span>.<span class="at">max</span>(maxValue<span class="op">,</span> thisValue)<span class="op">;</span>
                    <span class="op">}</span>)<span class="op">;</span>
                    
                    <span class="kw">var</span> value2range <span class="op">=</span> <span class="va">d3</span>.<span class="at">scaleLinear</span>()
                        .<span class="at">domain</span>([minValue<span class="op">,</span> maxValue])
                        .<span class="at">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>])
                    
                    <span class="kw">var</span> range2color <span class="op">=</span> <span class="va">d3</span>.<span class="at">interpolateBlues</span><span class="op">;</span>
                    
                    <span class="va">states</span>.<span class="at">style</span>(<span class="st">&quot;fill&quot;</span><span class="op">,</span> <span class="kw">function</span>(d)<span class="op">{</span>
                        <span class="cf">return</span> <span class="at">range2color</span>(
                          <span class="at">value2range</span>(country2value[<span class="va">d</span>.<span class="va">properties</span>.<span class="at">name</span>])
                        )<span class="op">;</span>
                    <span class="op">}</span>)<span class="op">;</span>
                <span class="op">}</span>)<span class="op">;</span>
            <span class="op">}</span>)<span class="op">;</span>
        &lt;/script<span class="op">&gt;</span>
    &lt;/body<span class="op">&gt;</span>
&lt;/html<span class="op">&gt;</span></code></pre>
<p><br><br></p>
<p><strong>QUESTION</strong>: Compare D3 with R and Tableau Public for data visualisation – which do you prefer and why?</p>
<hr />

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="brief-history-of-data-visualisation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="designing-data-visualisations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"toc": {
"collapse": "Module"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
